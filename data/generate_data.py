import numpy as np
import os

# Letras desejadas
letters = "ABCDEJK"

# Representação das letras em matrizes 7x9 (1 = preenchido, 0 = vazio)
letter_representations = {
    'A': [
        # Primeira representação de "A"
            [
                "0011000",
                "0001000",
                "0001000",
                "0010100",
                "0010100",
                "0111110",
                "0100010",
                "0100010",
                "1110111"
            ],
            [
                "0001000",
                "0001000",
                "0001000",
                "0010100",
                "0010100",
                "0100010",
                "0111110",
                "0100010",
                "0100010" 
            ],
            [
                "0001000",
                "0001000",
                "0010100",
                "0010100",
                "0100010",
                "0111110",
                "1000001",
                "1000001",
                "1100011" 
            ]
        ],   
    'B': [
            [
                "1111110",
                "0100001",
                "0100001",
                "0100001",
                "0111110",
                "0100001",
                "0100001",
                "0100001",
                "1111110"
            ],
            [
                "1111110",
                "1000001",
                "1000001",
                "1000001",
                "1011110",
                "1000001",
                "1000001",
                "1000001",
                "1111110"
            ],
            [
                "1111110",
                "0100001",
                "0100001",
                "0111110",
                "0100001",
                "0100001",
                "0100001",
                "0100001",
                "1111110"
            ]
    ],
    'C': [
            [
                "0011111",
                "0100001",
                "1000000",
                "1000000",
                "1000000",
                "1000000",
                "1000000",
                "0100001",
                "0011110"
            ],
            [
                "0011100",
                "0100010",
                "1000001",
                "1000000",
                "1000000",
                "1000000",
                "1000001",
                "0100010",
                "0011100"
            ],
            [
                "0011101",
                "0100011",
                "1000001",
                "1000000",
                "1000000",
                "1000000",
                "1000001",
                "0100010",
                "0011100"
            ]
    ],
    'D': [
            [
                "1111100",
                "0100010",
                "0100001",
                "0100001",
                "0100001",
                "0100001",
                "0100001",
                "0100010",
                "1111100"
            ],
            [
                "1111100",
                "1000010",
                "1000001",
                "1000001",
                "1000001",
                "1000001",
                "1000001",
                "1000010",
                "1111100"
            ],
            [
                "1111100",
                "0100010",
                "0100001",
                "0100001",
                "0100001",
                "0100001",
                "0100001",
                "0100010",
                "1111100"
            ]
    ],
    'E': [
            [
                "1111111",
                "0100001",
                "0100000",
                "0101000",
                "0111000",
                "0101000",
                "0100000",
                "0100001",
                "1111111"
            ],
            [
                "1111111",
                "1000000",
                "1000000",
                "1000000",
                "1111100",
                "1000000",
                "1000000",
                "1000000",
                "1111111"
            ],
            [
                "1111111",
                "0100001",
                "0101000",
                "0111000",
                "0101000",
                "0100000",
                "0100000",
                "0100001",
                "1111111"
            ]
    ],
    'J': [
            [
                "0001111",
                "0000010",
                "0000010",
                "0000010",
                "0000010",
                "0000010",
                "0100010",
                "0100010",
                "0011100"
            ],
            [
                "0000010",
                "0000010",
                "0000010",
                "0000010",
                "0000010",
                "0000010",
                "0100010",
                "0100010",
                "0011100"
            ],
            [
                "0000111",
                "0000010",
                "0000010",
                "0000010",
                "0000010",
                "0000010",
                "0000010",
                "0100010",
                "0011100"
            ]
    ],
    'K': [
            [
                "1110011",
                "0100100",
                "0101000",
                "0110000",
                "0110000",
                "0101000",
                "0100100",
                "0100010",
                "1110011"
            ],
            [
                "1000010",
                "1000100",
                "1001000",
                "1010000",
                "1100000",
                "1010000",
                "1001000",
                "1000100",
                "1000010"
            ],
            [
                "1110011",
                "0100010",
                "0100100",
                "0101000",
                "0110000",
                "0101000",
                "0100100",
                "0100010",
                "1110011"
            ]
    ]
}

# Transformar dicionário em arrays NumPy
X = []
y = []

for idx, letter in enumerate(letters):
    for representation in letter_representations[letter]:  # Itera sobre as 3 representações
        matrix = np.array([[int(bit) for bit in row] for row in representation])
        X.append(matrix.flatten())  # Transforma a matriz em um vetor
        y.append(idx)  # Usa o mesmo índice para todas as representações da mesma letra

# Converter para arrays NumPy
X = np.array(X)
y = np.array(y)

X_train = np.array([np.array([int(bit) for row in letter_representations[char] for bit in row]).flatten() for char in letters])
y_train = np.eye(len(letters))

# Criar a pasta "data" se não existir
data_path = os.path.dirname(os.path.abspath(__file__))
file_path = os.path.join(data_path, "letters_7x9.npy")

# Salvar os dados
np.save(file_path, {"X": X, "y": y})
print(f"Arquivo '{file_path}' gerado com sucesso!")
